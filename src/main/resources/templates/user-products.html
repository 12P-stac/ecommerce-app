<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>User Products - Admin View</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
<div class="container mt-5">
    <h2 class="text-center mb-4">Products Sold by <span th:text="${user.username}"></span></h2>

    <table class="table table-bordered table-striped">
        <thead>
            <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Price</th>
                <th>Quantity</th>
                <th>Available</th>
            </tr>
        </thead>
        <tbody>
            <tr th:each="product : ${productsPage.content}">
                <td th:text="${product.id}"></td>
                <td th:text="${product.name}"></td>
                <td th:text="${product.price}"></td>
                <td th:text="${product.quantity}"></td>
                <td th:text="${product.available}"></td>
            </tr>
        </tbody>
    </table>

    <!-- Pagination -->
    <nav>
        <ul class="pagination">
            <li class="page-item" th:classappend="${productsPage.first}? 'disabled'">
                <a class="page-link"
                   th:href="@{'/admin/users/' + ${user.id} + '/products'(page=${productsPage.number-1})}">Previous</a>
            </li>
            <li class="page-item" th:each="i : ${#numbers.sequence(0, productsPage.totalPages-1)}"
                th:classappend="${productsPage.number == i}? 'active'">
                <a class="page-link"
                   th:href="@{'/admin/users/' + ${user.id} + '/products'(page=${i})}"
                   th:text="${i+1}">1</a>
            </li>
            <li class="page-item" th:classappend="${productsPage.last}? 'disabled'">
                <a class="page-link"
                   th:href="@{'/admin/users/' + ${user.id} + '/products'(page=${productsPage.number+1})}">Next</a>
            </li>
        </ul>
    </nav>

    <a th:href="@{/admin/dashboard}" class="btn btn-secondary mt-3">Back to Dashboard</a>
</div>
</body>
</html>
